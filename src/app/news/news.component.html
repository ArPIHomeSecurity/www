<div class="background">
  <div class="container">
    <div class="grid">
      <div class="col-12">
        <h1>{{ 'arpi.news.title' | translate }}</h1>
      </div>

      <div *ngFor="let news of newsList; let i = index" class="col-12">
        <mat-card class="col-3">
          <mat-card-header>
            <mat-card-title>{{ news.title | translate }}</mat-card-title>
            <mat-card-subtitle class="card-subtitle mb-2 text-muted">{{
              news.date | date
            }}</mat-card-subtitle>
          </mat-card-header>
          <img
            mat-card-image
            [src]="news.image"
            class="img-fluid rounded-start news-image"
            alt="news image"
          />
          <mat-card-content>
            <p>
              @if (!expanded[i] && (news.content | translate).length > 500) {
                <span
                  >{{ getShortText(news.content | translate, 500) }}
                  <a href="#" (click)="expand(i, $event)">
                    {{ 'arpi.news.readMore' | translate }}
                  </a></span
                >
              }
              @if (expanded[i] && (news.content | translate).length <= 500) {
                <span
                  >{{ news.content | translate }}
                  <a href="#" (click)="collapse(i, $event)">{{
                    'arpi.news.readLess' | translate
                  }}</a></span
                >
              }
              @if (!expanded[i] && (news.content | translate).length <= 500) {
                <span>{{ news.content | translate }}</span>
              }
            </p>
          </mat-card-content>
          @if (news.link) {
            <mat-divider></mat-divider>
            <mat-card-actions align="end">
              <a matButton color="primary" [href]="news.link" target="_blank" rel="noopener">
                {{ 'arpi.action.view' | translate }}
              </a>
            </mat-card-actions>
          }
        </mat-card>
      </div>
    </div>
  </div>
</div>
